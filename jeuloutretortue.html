<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Loutre vs Upside Down</title>

<style>
  body {
    background: #0b0b14;
    font-family: Arial, sans-serif;
    color: white;
    text-align: center;
  }

  .game {
    position: relative;
    width: 320px;
    height: 220px;
    margin: 30px auto;
    background: radial-gradient(#111, #05050a);
    border-radius: 14px;
    overflow: hidden;
    box-shadow: 0 0 25px rgba(193, 18, 31, 0.6);
  }

  .player, .enemy, .goal {
    position: absolute;
    font-size: 2rem;
  }

  .player { left: 10px; top: 90px; }
  .goal  { right: 10px; top: 90px; }
  .enemy { left: 150px; top: 20px; }

  .status {
    margin-top: 10px;
    font-size: 0.9rem;
  }

  .controls button {
    background: #c1121f;
    border: none;
    color: white;
    padding: 8px 12px;
    margin: 4px;
    border-radius: 6px;
    font-size: 1rem;
  }
</style>
</head>

<body>

<h3> Ma ü¶¶ retrouve sa üê¢</h3>

<div class="game" id="game">
  <div class="player" id="player">ü¶¶</div>
  <div class="enemy" id="enemy">üëæ</div>
  <div class="goal" id="goal">üê¢</div>
</div>

<div class="status" id="status">
  Le Demogorgon te chasse‚Ä¶
</div>

<div class="controls">
  <button onclick="movePlayer(0,-12)">‚¨ÜÔ∏è</button><br>
  <button onclick="movePlayer(-12,0)">‚¨ÖÔ∏è</button>
  <button onclick="movePlayer(12,0)">‚û°Ô∏è</button><br>
  <button onclick="movePlayer(0,12)">‚¨áÔ∏è</button>
</div>

<script>
  const player = document.getElementById("player");
  const enemy = document.getElementById("enemy");
  const goal = document.getElementById("goal");
  const status = document.getElementById("status");
  const game = document.getElementById("game");

  let playing = true;

  let px = 10, py = 90;
  let ex = 150, ey = 20;

 const enemySpeed = 1.3; // niveau de difficult√© 

  function clamp(v, min, max) {
    return Math.max(min, Math.min(v, max));
  }

  function updatePositions() {
    player.style.left = px + "px";
    player.style.top = py + "px";
    enemy.style.left = ex + "px";
    enemy.style.top = ey + "px";
  }

  function movePlayer(dx, dy) {
    if (!playing) return;

    px = clamp(px + dx, 0, game.clientWidth - 30);
    py = clamp(py + dy, 0, game.clientHeight - 30);

    checkCollision();
    updatePositions();
  }

  document.addEventListener("keydown", e => {
    if (e.key === "ArrowUp") movePlayer(0, -12);
    if (e.key === "ArrowDown") movePlayer(0, 12);
    if (e.key === "ArrowLeft") movePlayer(-12, 0);
    if (e.key === "ArrowRight") movePlayer(12, 0);
  });

  // üëæ IA du Demogorgon : poursuite
  setInterval(() => {
    if (!playing) return;

    const dx = px - ex;
    const dy = py - ey;
    const dist = Math.hypot(dx, dy) || 1;

    // vecteur direction normalis√©
    ex += (dx / dist) * enemySpeed + (Math.random() - 0.5);
    ey += (dy / dist) * enemySpeed + (Math.random() - 0.5);

    ex = clamp(ex, 0, game.clientWidth - 30);
    ey = clamp(ey, 0, game.clientHeight - 30);

    checkCollision();
    updatePositions();
  }, 30);

  function isTouching(ax, ay, bx, by) {
    return Math.abs(ax - bx) < 22 && Math.abs(ay - by) < 22;
  }

  function checkCollision() {
    if (isTouching(px, py, ex, ey)) {
      playing = false;
      status.textContent = "üíÄ Le Demogorgon t‚Äôa attrap√©e‚Ä¶";
    }

    if (isTouching(px, py, goal.offsetLeft, goal.offsetTop)) {
      playing = false;
      status.textContent =
        "‚ù§Ô∏è M√™me poursuivie par les monstres, tu arrives toujours √† me retrouver !";
    }
  }

  updatePositions();
</script>

</body>
</html>